<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <div th:replace="~{layout/base :: nav-bar}"></div>
  <main class="container">
    <h2 th:text="${pet.name}">Pet Name</h2>

    <div class="pet-photo mb-1" th:if="${pet.imagePath != null}">
      <img th:src="@{/uploads/pets/{filename}(filename=${pet.imageFilename})}" alt="Pet photo" class="pet-image">
    </div>
    <div class="pet-photo mb-1" th:if="${pet.imagePath == null}">
      <img th:src="@{/images/pet-placeholder.svg}" alt="No photo" class="pet-image pet-image--placeholder">
    </div>

    <div class="card info-block">
      <p th:if="${pet.createdAt != null}">
        <strong>Added:</strong>
        <span th:text="${#temporals.format(pet.createdAt, 'dd MMM yyyy')}">Date</span>
      </p>
      <p>
        <strong>Species:</strong>
        <span th:text="${pet.species}">Dog</span>
      </p>
      <p>
        <strong>Age:</strong>
        <span th:text="${pet.age}">2</span>
      </p>
      <p>
        <strong>Adopted:</strong>
        <span th:text="${pet.adopted}">False</span>
      </p>
      <p>
        <strong>Shelter:</strong>
        <span th:text="${pet.shelter.name}">Shelter Name</span>
        <span th:if="${pet.shelter.location}">
          (<span th:text="${pet.shelter.location}">Location</span>)
        </span>
      </p>
    </div>

    <form th:action="@{/ui/adoption}"
          th:object="${adoptionApplicationRequest}"
          method="post"
          sec:authorize="hasRole('ADOPTER')">
      <input type="hidden" name="petId" id="petId" th:value="${pet.id}">
      <label>Why would you be a good adopter?</label>
      <textarea th:field="*{message}" placeholder="Tell us about yourself and your home..."></textarea>
      <button>Apply for Adoption</button>
    </form>

    <form th:if="${canRemovePet}"
          th:action="@{/ui/pet/{id}/delete(id=${pet.id})}"
          method="post"
          class="delete-form"
          onsubmit="return confirm('Are you sure you want to remove this pet from the system?');">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
      <button type="submit" class="btn btn-danger">Remove pet from system</button>
    </form>

    <a th:href="@{/ui/pet}" class="back-link">‚Üê Back to pets</a>
  </main>
</html>
